async function loadCountry(iso3){const el=document.getElementById('content');el.innerHTML=`<p>Loading ${iso3}â€¦</p>`;try{const res=await fetch(`../data/${iso3.toUpperCase()}.json`);if(!res.ok)throw new Error(`No JSON for ${iso3}`);const j=await res.json();const dims=Object.entries(j.wia_dimensions).map(([k,v])=>`<div class="chip"><b>${k}</b>: ${v.completeness.toFixed(2)}</div>`).join('');const rows=j.datasets.map(d=>`<tr><td>${d.key}</td><td>${d.dimension.join(', ')}</td><td>ADM${d.max_admin_level}</td><td>${d.freshness_bucket||'n/a'}</td><td>${(d.continuity_ratio_12m??1).toFixed(2)}</td><td>${d.completeness_score.toFixed(3)}</td></tr>`).join('');el.innerHTML=`<section class="cards">${dims}</section><table><thead><tr><th>Dataset</th><th>Dimension</th><th>Admin</th><th>Freshness</th><th>Continuity</th><th>Score</th></tr></thead><tbody>${rows}</tbody></table><details><summary>Raw JSON</summary><pre>${JSON.stringify(j,null,2)}</pre></details>`}catch(e){el.innerHTML=`<p class="error">${e.message}</p>`}}document.getElementById('load').onclick=()=>loadCountry(document.getElementById('iso3').value.trim()||'MLI');window.onload=()=>loadCountry('MLI');
